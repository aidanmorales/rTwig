<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prune QSM — prune_qsm • rTwig</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prune QSM — prune_qsm"><meta name="description" content="Efficiently prune a QSM. The user can prune by cylinder, branch,
and segment ids, or by height or diameter classes, individually, or all at
the same time, and return either the pruned data, the remaining data, or a
binary index of which cylinders are pruned."><meta property="og:description" content="Efficiently prune a QSM. The user can prune by cylinder, branch,
and segment ids, or by height or diameter classes, individually, or all at
the same time, and return either the pruned data, the remaining data, or a
binary index of which cylinders are pruned."><meta property="og:image" content="https://aidanmorales.github.io/rTwig/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rTwig</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Box-Dimension.html">Box-Dimension</a></li>
    <li><a class="dropdown-item" href="../articles/Dictionary.html">Dictionary</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/Twigs.html">Twigs</a></li>
    <li><a class="dropdown-item" href="../articles/Validation.html">Validation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aidanmorales/rTwig/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Prune QSM</h1>
      <small class="dont-index">Source: <a href="https://github.com/aidanmorales/rTwig/blob/main/R/prune_qsm.R" class="external-link"><code>R/prune_qsm.R</code></a></small>
      <div class="d-none name"><code>prune_qsm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Efficiently prune a QSM. The user can prune by cylinder, branch,
and segment ids, or by height or diameter classes, individually, or all at
the same time, and return either the pruned data, the remaining data, or a
binary index of which cylinders are pruned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prune_qsm</span><span class="op">(</span></span>
<span>  cylinder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cylinder_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  branch_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  segment_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height_m <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  diameter_cm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cylinder">cylinder<a class="anchor" aria-label="anchor" href="#arg-cylinder"></a></dt>
<dd><p>QSM cylinder data frame</p></dd>


<dt id="arg-cylinder-ids">cylinder_ids<a class="anchor" aria-label="anchor" href="#arg-cylinder-ids"></a></dt>
<dd><p>A single or vector of cylinder ids. Everything connected above the cylinder is pruned.</p></dd>


<dt id="arg-branch-ids">branch_ids<a class="anchor" aria-label="anchor" href="#arg-branch-ids"></a></dt>
<dd><p>A single or vector of branch ids. Everything connected to the branch is pruned.</p></dd>


<dt id="arg-segment-ids">segment_ids<a class="anchor" aria-label="anchor" href="#arg-segment-ids"></a></dt>
<dd><p>A single or vector of segment ids. Everything connected above the segment is pruned.</p></dd>


<dt id="arg-height-m">height_m<a class="anchor" aria-label="anchor" href="#arg-height-m"></a></dt>
<dd><p>Height class in meters below which all cylinders are pruned. Valid inputs are numeric to one decimal.</p></dd>


<dt id="arg-diameter-cm">diameter_cm<a class="anchor" aria-label="anchor" href="#arg-diameter-cm"></a></dt>
<dd><p>Branch diameter class in centimeters below which all cylinders are pruned. Valid inputs are numeric to one decimal.</p></dd>


<dt id="arg-invert">invert<a class="anchor" aria-label="anchor" href="#arg-invert"></a></dt>
<dd><p>Return the remaining or pruned data. Defaults to TRUE (the remaining data), but can be set to FALSE.</p></dd>


<dt id="arg-index">index<a class="anchor" aria-label="anchor" href="#arg-index"></a></dt>
<dd><p>Returns a column index indicating if the cylinder is pruned (1) or un-pruned (0). Defaults to FALSE, but can be set to TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load QSM</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/QSM.mat"</span>, package <span class="op">=</span> <span class="st">"rTwig"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">qsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_qsm.html">import_qsm</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Importing TreeQSM .mat</span>
<span class="r-in"><span><span class="va">cylinder</span> <span class="op">&lt;-</span> <span class="va">qsm</span><span class="op">$</span><span class="va">cylinder</span></span></span>
<span class="r-in"><span><span class="va">cylinder</span> <span class="op">&lt;-</span> <span class="fu"><a href="update_cylinders.html">update_cylinders</a></span><span class="op">(</span><span class="va">cylinder</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Updating Cylinder Ordering</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Total Children</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building Cylinder Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Verifying Topology</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Growth Length</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Reverse Branch Order</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Segments</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Alternate Branch Numbers</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Path Metrics</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Pruning Index</span></span></span>
<span class="r-in"><span><span class="va">prune1</span> <span class="op">&lt;-</span> <span class="fu">prune_qsm</span><span class="op">(</span><span class="va">cylinder</span>, height_m <span class="op">=</span> <span class="fl">2</span>, index <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building Cylinder Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Caching Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Pruning QSM</span>
<span class="r-in"><span><span class="fu"><a href="plot_qsm.html">plot_qsm</a></span><span class="op">(</span><span class="va">prune1</span>, color <span class="op">=</span> <span class="va">pruning</span>, palette <span class="op">=</span> <span class="st">"blue2red"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting Cylinders</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Panning plot on rgl device: 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Remaining</span></span></span>
<span class="r-in"><span><span class="va">prune2</span> <span class="op">&lt;-</span> <span class="fu">prune_qsm</span><span class="op">(</span><span class="va">cylinder</span>, height_m <span class="op">=</span> <span class="fl">2</span>, invert <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Pruning QSM</span>
<span class="r-in"><span><span class="fu"><a href="plot_qsm.html">plot_qsm</a></span><span class="op">(</span><span class="va">prune2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting Cylinders</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Panning plot on rgl device: 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Pruned</span></span></span>
<span class="r-in"><span><span class="va">prune3</span> <span class="op">&lt;-</span> <span class="fu">prune_qsm</span><span class="op">(</span><span class="va">cylinder</span>, height_m <span class="op">=</span> <span class="fl">2</span>, invert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Pruning QSM</span>
<span class="r-in"><span><span class="fu"><a href="plot_qsm.html">plot_qsm</a></span><span class="op">(</span><span class="va">prune3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting Cylinders</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Panning plot on rgl device: 1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aidan Morales, David W. MacFarlane.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

