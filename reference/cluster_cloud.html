<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cluster Cloud — cluster_cloud • rTwig</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cluster Cloud — cluster_cloud"><meta name="description" content="Cluster a point cloud or simulate a point cloud based on its QSM.
If using the input point cloud, the cylinder ids are transferred to the
cloud using the nearest neighbors. If simulating a cloud, the points are built
directly from the cylinders with user controlled spacing. The cylinder id can
be used to easily join the desired variables from the QSM to the cloud.
The nearest neighbor search uses the C++ nanoflann library."><meta property="og:description" content="Cluster a point cloud or simulate a point cloud based on its QSM.
If using the input point cloud, the cylinder ids are transferred to the
cloud using the nearest neighbors. If simulating a cloud, the points are built
directly from the cylinders with user controlled spacing. The cylinder id can
be used to easily join the desired variables from the QSM to the cloud.
The nearest neighbor search uses the C++ nanoflann library."><meta property="og:image" content="https://aidanmorales.github.io/rTwig/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rTwig</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Box-Dimension.html">Box-Dimension</a></li>
    <li><a class="dropdown-item" href="../articles/Dictionary.html">Dictionary</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/Twigs.html">Twigs</a></li>
    <li><a class="dropdown-item" href="../articles/Validation.html">Validation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aidanmorales/rTwig/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Cluster Cloud</h1>
      <small class="dont-index">Source: <a href="https://github.com/aidanmorales/rTwig/blob/main/R/cluster_cloud.R" class="external-link"><code>R/cluster_cloud.R</code></a></small>
      <div class="d-none name"><code>cluster_cloud.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Cluster a point cloud or simulate a point cloud based on its QSM.
If using the input point cloud, the cylinder ids are transferred to the
cloud using the nearest neighbors. If simulating a cloud, the points are built
directly from the cylinders with user controlled spacing. The cylinder id can
be used to easily join the desired variables from the QSM to the cloud.
The nearest neighbor search uses the C++ nanoflann library.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cluster_cloud</span><span class="op">(</span><span class="va">cylinder</span>, cloud <span class="op">=</span> <span class="cn">NULL</span>, spacing <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cylinder">cylinder<a class="anchor" aria-label="anchor" href="#arg-cylinder"></a></dt>
<dd><p>A QSM cylinder data frame.</p></dd>


<dt id="arg-cloud">cloud<a class="anchor" aria-label="anchor" href="#arg-cloud"></a></dt>
<dd><p>The input point cloud for the QSM to cluster. If NULL (default), the simulated cloud is returned.</p></dd>


<dt id="arg-spacing">spacing<a class="anchor" aria-label="anchor" href="#arg-spacing"></a></dt>
<dd><p>The point spacing in meters for the simulated cloud. Defaults to 0.02 meters.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A point cloud data frame</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>blanco2014nanoflannrTwig</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Load Data</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/QSM.mat"</span>, package <span class="op">=</span> <span class="st">"rTwig"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">file2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cloud.txt"</span>, package <span class="op">=</span> <span class="st">"rTwig"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">qsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="run_rtwig.html">run_rtwig</a></span><span class="op">(</span><span class="va">file</span>, twig_radius <span class="op">=</span> <span class="fl">4.23</span>, metrics <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Importing TreeQSM</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Updating Cylinder Ordering</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Total Children</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building Cylinder Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Caching Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Verifying Topology</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Growth Length</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Reverse Branch Order</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Segments</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Alternate Branch Numbers</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Path Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Smoothing QSM</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Generating Paths</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering Paths</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Modeling Paths</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Updating Radii</span>
<span class="r-in"><span><span class="va">cloud</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">file2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Clustered Cloud</span></span></span>
<span class="r-in"><span><span class="va">clustered_cloud</span> <span class="op">&lt;-</span> <span class="fu">cluster_cloud</span><span class="op">(</span>cylinder <span class="op">=</span> <span class="va">qsm</span>, cloud <span class="op">=</span> <span class="va">cloud</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clustering Point Cloud</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># # Join QSM variables and export</span></span></span>
<span class="r-in"><span><span class="co"># filename &lt;- tempfile(pattern = "clustered_cloud", fileext = ".txt")</span></span></span>
<span class="r-in"><span><span class="co"># clustered_cloud %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   left_join(qsm) %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   fwrite(file = filename)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simulated Cloud</span></span></span>
<span class="r-in"><span><span class="va">simulated_cloud</span> <span class="op">&lt;-</span> <span class="fu">cluster_cloud</span><span class="op">(</span>cylinder <span class="op">=</span> <span class="va">qsm</span>, spacing <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Simulating Point Cloud</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot Simulated Cloud</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_qsm.html">plot_qsm</a></span><span class="op">(</span>cloud <span class="op">=</span> <span class="va">simulated_cloud</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Plotting Cloud</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Panning plot on rgl device: 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># # Join QSM variables and export</span></span></span>
<span class="r-in"><span><span class="co"># filename2 &lt;- tempfile(pattern = "simulated_cloud", fileext = ".txt")</span></span></span>
<span class="r-in"><span><span class="co"># simulated_cloud %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   left_join(qsm) %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   fwrite(file = filename2)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aidan Morales, David W. MacFarlane.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

