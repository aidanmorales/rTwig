<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tree Metrics — tree_metrics • rTwig</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tree Metrics — tree_metrics"><meta name="description" content="Calculates tree metrics from a QSM"><meta property="og:description" content="Calculates tree metrics from a QSM"><meta property="og:image" content="https://aidanmorales.github.io/rTwig/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rTwig</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Box-Dimension.html">Box-Dimension</a></li>
    <li><a class="dropdown-item" href="../articles/Dictionary.html">Dictionary</a></li>
    <li><a class="dropdown-item" href="../articles/Metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/Twigs.html">Twigs</a></li>
    <li><a class="dropdown-item" href="../articles/Validation.html">Validation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aidanmorales/rTwig/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Tree Metrics</h1>
      <small class="dont-index">Source: <a href="https://github.com/aidanmorales/rTwig/blob/main/R/tree_metrics.R" class="external-link"><code>R/tree_metrics.R</code></a></small>
      <div class="d-none name"><code>tree_metrics.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates tree metrics from a QSM</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tree_metrics</span><span class="op">(</span><span class="va">cylinder</span>, verify <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cylinder">cylinder<a class="anchor" aria-label="anchor" href="#arg-cylinder"></a></dt>
<dd><p>QSM cylinder data frame</p></dd>


<dt id="arg-verify">verify<a class="anchor" aria-label="anchor" href="#arg-verify"></a></dt>
<dd><p>Verify QSM topology. If TRUE (default and recommended),
only topologically connected structures (a whole a tree or an individual
branch) are eligible to run. This ensures all metrics are correct and
verified. If FALSE, the metrics are 'brute forced' and not verified.
This is strongly discouraged, but can enable the calculation of tree metrics
on topologically disconnected structures.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list of tree metric data frames and synthetic point cloud</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Calculates detailed tree, branch, and segment metrics from a QSM.
Valid inputs require a connected QSM, which can be a whole tree or an
individual branch. The outputs include all of the standard outputs from
TreeQSM, and also additional variables, including, but not limited to,
growth length, reverse branch order, branch segment or node relationships,
and distances from twigs and the base of the tree, across various
distribution metrics. Also included is a simulated point cloud of the tree,
based on the QSM cylinder radii. When corrected with Real Twig, this allows
for the testing and validation of point cloud diameter overestimation
throughout the tree.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>TreeQSMrTwig</p>
<p>growth_parameter1rTwig</p>
<p>growth_parameter2rTwig</p>
<p>treegraph2rTwig</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## TreeQSM Processing Chain</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/QSM.mat"</span>, package <span class="op">=</span> <span class="st">"rTwig"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cylinder</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_treeqsm.html">import_treeqsm</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">$</span><span class="va">cylinder</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Importing TreeQSM</span>
<span class="r-in"><span><span class="va">cylinder</span> <span class="op">&lt;-</span> <span class="fu"><a href="update_cylinders.html">update_cylinders</a></span><span class="op">(</span><span class="va">cylinder</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Updating Cylinder Ordering</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Total Children</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building Cylinder Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Caching Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Verifying Topology</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Growth Length</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Reverse Branch Order</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Segments</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Alternate Branch Numbers</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Path Metrics</span>
<span class="r-in"><span><span class="va">metrics</span> <span class="op">&lt;-</span> <span class="fu">tree_metrics</span><span class="op">(</span><span class="va">cylinder</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Segment Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Tree Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Generating Point Cloud</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Crown Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Tree Distributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Distributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Segment Distributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Stem Taper</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Spreads</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Alternate Branch Metrics</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">metrics</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "branch"                "segment"               "cloud"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "tree"                  "tree_height_dist"      "tree_diameter_dist"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "tree_zenith_dist"      "tree_azimuth_dist"     "branch_diameter_dist" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "branch_height_dist"    "branch_angle_dist"     "branch_zenith_dist"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "branch_azimuth_dist"   "branch_order_dist"     "segment_diameter_dist"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "segment_height_dist"   "segment_angle_dist"    "segment_zenith_dist"  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "segment_azimuth_dist"  "segment_order_dist"    "stem_taper"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] "spreads"               "vertical_profile"      "branch_alt"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "version"               "run_date"             </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## SimpleForest Processing Chain</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/QSM.csv"</span>, package <span class="op">=</span> <span class="st">"rTwig"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cylinder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cylinder</span> <span class="op">&lt;-</span> <span class="fu"><a href="update_cylinders.html">update_cylinders</a></span><span class="op">(</span><span class="va">cylinder</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finding Branches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Total Children</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Building Cylinder Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Caching Network</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Verifying Topology</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Path Metrics</span>
<span class="r-in"><span><span class="va">metrics</span> <span class="op">&lt;-</span> <span class="fu">tree_metrics</span><span class="op">(</span><span class="va">cylinder</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Segment Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Tree Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Generating Point Cloud</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Crown Metrics</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Tree Distributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Branch Distributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Segment Distributions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Stem Taper</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Spreads</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Calculating Alternate Branch Metrics</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">metrics</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "branch"                "segment"               "cloud"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "tree"                  "tree_height_dist"      "tree_diameter_dist"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "tree_zenith_dist"      "tree_azimuth_dist"     "branch_diameter_dist" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "branch_height_dist"    "branch_angle_dist"     "branch_zenith_dist"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "branch_azimuth_dist"   "branch_order_dist"     "segment_diameter_dist"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "segment_height_dist"   "segment_angle_dist"    "segment_zenith_dist"  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "segment_azimuth_dist"  "segment_order_dist"    "stem_taper"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] "spreads"               "vertical_profile"      "branch_alt"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "version"               "run_date"             </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aidan Morales, David W. MacFarlane.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

